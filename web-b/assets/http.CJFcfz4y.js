import{o as t,b as e,w as a,r as s,n as o,a as n,j as i,x as r,y as p,u,z as c,f as l,A as d,B as h,C as m,D as f,E as g,G as w,H as y}from"./index-C4OrJxFS.js";import{_ as b}from"./home.CDDtgVUx.js";const j=b({name:"uniCol",props:{span:{type:Number,default:24},offset:{type:Number,default:-1},pull:{type:Number,default:-1},push:{type:Number,default:-1},xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},data:()=>({gutter:0,sizeClass:"",parentWidth:0,nvueWidth:0,marginLeft:0,right:0,left:0}),created(){let t=this.$parent;for(;t&&"uniRow"!==t.$options.componentName;)t=t.$parent;this.updateGutter(t.gutter),t.$watch("gutter",(t=>{this.updateGutter(t)}))},computed:{sizeList(){let{span:t,offset:e,pull:a,push:s}=this;return{span:t,offset:e,pull:a,push:s}},pointClassList(){let t=[];return["xs","sm","md","lg","xl"].forEach((e=>{const a=this[e];"number"==typeof a?t.push(`uni-col-${e}-${a}`):"object"==typeof a&&a&&Object.keys(a).forEach((s=>{t.push("span"===s?`uni-col-${e}-${a[s]}`:`uni-col-${e}-${s}-${a[s]}`)}))})),t.join(" ")}},methods:{updateGutter(t){t=Number(t),isNaN(t)||(this.gutter=t/2)}},watch:{sizeList:{immediate:!0,handler(t){let e=[];for(let a in t){const s=t[a];!s&&0!==s||-1===s||e.push("span"===a?`uni-col-${s}`:`uni-col-${a}-${s}`)}this.sizeClass=e.join(" ")}}}},[["render",function(r,p,u,c,l,d){const h=i;return t(),e(h,{class:o(["uni-col",l.sizeClass,d.pointClassList]),style:n({paddingLeft:`${Number(l.gutter)}rpx`,paddingRight:`${Number(l.gutter)}rpx`})},{default:a((()=>[s(r.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}],["__scopeId","data-v-84ac5f6d"]]);const C=b({name:"uniRow",componentName:"uniRow",props:{type:String,gutter:Number,justify:{type:String,default:"start"},align:{type:String,default:"top"},width:{type:[String,Number],default:750}},created(){},computed:{marginValue(){return this.gutter?-this.gutter/2:0},typeClass(){return"flex"===this.type?"uni-row--flex":""},justifyClass(){return"start"!==this.justify?`uni-row--flex-justify-${this.justify}`:""},alignClass(){return"top"!==this.align?`uni-row--flex-align-${this.align}`:""}}},[["render",function(r,p,u,c,l,d){const h=i;return t(),e(h,{class:o(["uni-row",d.typeClass,d.justifyClass,d.alignClass]),style:n({marginLeft:`${Number(d.marginValue)}rpx`,marginRight:`${Number(d.marginValue)}rpx`})},{default:a((()=>[s(r.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}],["__scopeId","data-v-9ff25b7f"]]),T="http://www.deploycloud.cn/api",$="http://aidep.cn:8601",x={decryptUserInfo:T+"/auth/wechat/login",qrcodeLogin:T+"/auth/wechat/qrcode",mplogin:T+"/auth/wechat/mplogin",googleLogin:T+"/auth/google/login",cappsList:T+"/capps",templatesList:T+"/capps/templates",gpusList:T+"/capps/gpus",depositPay:T+"/transactions/deposit",wechatPay:T+"/transactions/",createCapp:T+"/capps/create",startCapp:T+"/capps/start/",stopCapp:T+"/capps/stop/",delCapp:T+"/capps/",userInfo:T+"/users/me",getPower:T+"/users/power",powersOptions:T+"/powers/purchase-options",durationType:T+"/powers/duration-types",durationPrice:T+"/powers/clculate-duration-price",clculatePrice:T+"/powers/clculate-price",transactionsList:T+"/transactions",pricePowers:T+"/powers/conversion-price",flowsList:$+"/flow/flows/",promptStart:$+"/task/prompt/",imgResult:$+"/task/view/",imgHistory:$+"/task/history/",uploadUrl:$+"/task/upload/",depositPay:$+"/payment/create-payment/"};const L={httpRequest:(t,e)=>{let a=r("token"),s={url:t.url,data:e,method:t.method,header:"get"==t.method?{authorization:"bearer "+a,"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}:{authorization:"bearer "+a,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json; charset=UTF-8"},dataType:"json"};return new Promise((function(t,e){p(s).then((e=>{switch(e.data.code){case 10004:if(c("token"),"mp-weixin"===r("uniPlatform"))d({success(t){if(t.code){h({title:"加载中",mask:!0});var e=t.code;uni.getUserInfo({lang:"zh_CN",success:t=>{let a={};var s;a.code=e,a.rawData=t.rawData,a.signature=t.signature,a.encryptedData=t.encryptedData,a.iv=t.iv,(s=a,L.httpRequest({url:x.mplogin,method:"POST"},s)).then((t=>{if(2e4!=t.code)return u({icon:"none",title:t.data.msg});m("token",t.data.token),u({icon:"success",title:"登录成功"}),f()}))},fail:t=>(f(),u({icon:"none",title:"亲爱的用户，您拒绝了！我就不给您跳转了。"}))})}},fail:t=>u({icon:"none",title:"亲爱的用户，您拒绝了！我就不给您跳转了。"})});else l({url:"/pages/web/web02GpuLogin"});break;case 2e4:break;default:console.log(e.data.code),u({icon:"none",title:e.data.message})}t(e.data)})).catch((t=>{e(t)}))}))},httpTokenRequest:(t,e)=>{let a,s="";a=r("token"),s=r("tempAuthorization");let o={url:baseUrl+t.url,data:e,method:t.method,header:"get"==t.method?{authorization:"bearer "+a,tempAuthorization:s,"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}:{authorization:"bearer "+a,tempAuthorization:s,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},dataType:"json"};return new Promise((function(t,e){p(o).then((e=>{if(403===e[1].data.code)c("token"),g({url:"../home/home"}),w({confirmText:"前往登录",content:"登录已失效，请重新登录",showCancel:!1});t(e[1])})).catch((t=>{e(t)}))}))},post:function(t,e){return new Promise(((a,s)=>{p({url:baseUrl+t,data:e,method:"POST",header:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},dataType:"json",success(t){console.log("http",t),0==t.data.code?a(t.data):(s(t.data),403==t.data.code?(console.log("触发403"),u({title:"登录已失效,请重新登录",icon:"none"}),c("token")):t.data.code)},fail(t){s(t)}})}))},get:async function(t,e){let a=await new Promise(((t,e)=>{const a=r("token");console.log("token",a),a?t(a):(setTimeout((()=>{y({url:"/pages/index/index"})}),1e3),e("登录过期"))}));return new Promise(((s,o)=>{p({url:baseUrl+t,data:e,method:"GET",header:{authorization:"bearer "+a,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},dataType:"json",success(t){console.log("http",t),0==t.data.code?s(t.data):(o(t.data),403==t.data.code?(console.log("触发403"),u({title:"登录已失效,请重新登录",icon:"none"}),c("token")):"401"==t.data.code||u({title:t.data.msg,icon:"none"}))},fail(t){o(t)}})}))}};export{j as _,C as a,x as c,L as r};
