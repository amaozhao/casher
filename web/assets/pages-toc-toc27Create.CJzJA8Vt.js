import{k as e,a as t,C as o,D as a,E as s,G as l,H as n,J as i,r,c,w as d,i as p,o as u,d as _,e as m,x as f,A as h,v as g,f as w,h as x,F as y,t as k,j as C,I as b,K as v,L as P}from"./index-BnGBZ2Zx.js";import{_ as j}from"./uni-popup.CmmWTqgK.js";import{r as I}from"./uni-app.es.BAhmK03J.js";import{r as T}from"./httpUtil.DN75PITx.js";import{U as A}from"./uqrcode.Cf8_SS6s.js";import{_ as O}from"./record.bSuQS5ND.js";import{_ as V}from"./speed.D2MJkbce.js";import{_ as S}from"./check.DZEWLAjS.js";import{_ as q}from"./_plugin-vue_export-helper.BCo6x5W8.js";const N=q({data:()=>({back:"",imageValue:[],imageStyles:{border:{width:0}},listStyles:{width:164,height:164,border:!1,dividline:!0,borderStyle:{width:0,color:"blue",radius:2}},option:{},needImg:!1,needTxt:!1,tipTxt:"",hasMoney:!1,href:"https://uniapp.dcloud.io/component/README?id=uniui",powerInput:"",money:"",workflow:{},orderNo:0,powerOptions:[]}),watch:{powerInput(e,t){T({url:"payment/hashrate-convert/",method:"POST",data:{amount:e}}).then((e=>{this.money=e.data.currency}))}},onLoad(e){var t,o;const a=JSON.parse(decodeURIComponent(e.item));this.workflow=a,this.needImg=(null==(t=a.workflow_fields)?void 0:t.cs_img_nodes.length)>0,this.needTxt=(null==(o=a.workflow_fields)?void 0:o.cs_text_nodes.length)>0,T({url:"payment/hashrate-template/",method:"GET",data:{origin_url:"http://localhost:5173/#/pages/toc/toc35Index"}}).then((e=>{this.powerOptions=e.data.PowerPurchaseOptions,this.money=this.powerOptions[0].AmountInCurrency,this.powerInput=this.powerOptions[0].PowerAmount}))},methods:{goHomePage(){e({url:"/pages/index/index"})},goRecordPage(){e({url:"/pages/toc/toc24Record"})},async goNextPage(){if(this.$refs.popup.open("bottom"),this.needTxt&&!this.tipTxt)return void t({title:"请先填写提示词",icon:"none"});await T({url:"payment/user-hashrate/",method:"GET"});const{id:o,consuming:a}=this.workflow,s=await T({url:"task/prompt/",method:"POST",data:{workflow_id:o,prompt_text:this.tipTxt}});if(200==s.status){t({title:s.message,icon:"none"});const{jilu_id:o}=s.data;setTimeout((()=>{e({url:`/pages/toc/toc26Loading?jilu_id=${o}&consuming=${a}`})}),2e3)}},check(){T({url:"payment/wechat-check/",data:{out_trade_no:this.orderNo}}).then((e=>{}))},goPay(){o({title:"加载中"}),T({url:"payment/create-wechatpay/",method:"POST",data:{amount:this.powerInput,pay_type:2,desc:""}}).then((e=>{this.orderNo=e.data.out_trade_no,this.$refs.popup2.open("bottom"),setTimeout((()=>{const t=new A;t.data=e.data.url,t.size=200,t.make();const o=a("qrcode",this);t.canvasContext=o,t.drawCanvas()}),100),setInterval((()=>{this.check()}),1e4)})).finally((()=>{s()}))},preview(){l({urls:this.back,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){console.log("选中了第"+(e.tapIndex+1)+"个按钮,第"+(e.index+1)+"张图片")},fail:function(e){console.log(e.errMsg)}}})},chose(){n({count:6,sizeType:["original","compressed"],sourceType:["album"],success:e=>{this.back=e.tempFilePaths,console.log(this.back)}})},uploadImage(e){console.log(11111112),i({url:"https://aidep.cn/task/upload/",filePath:this.back[0],name:"file",formData:{user:"test"},success:e=>{console.log("图片上传成功",e)},fail:e=>{console.log("图片上传失败",e)}})},select(e){console.log("选择文件：",this.imageValue)},progress(e){console.log("上传进度：",e)},success(e){console.log("上传成功")},fail(e){console.log("上传失败：",e)},powerPick(e){this.powerInput=e}}},[["render",function(e,t,o,a,s,l){const n=p,i=C,T=b,A=I(r("uni-popup"),j),q=v;return u(),c(n,{class:"flex column alignCenter bg_div"},{default:d((()=>[_(n,{class:"flex row justifyBetween alignCenter header_div"},{default:d((()=>[_(n,{class:"flex row alignCenter title_content_view",onClick:t[0]||(t[0]=e=>l.goHomePage())},{default:d((()=>[_(n,{class:"title_btn"},{default:d((()=>[m("创建")])),_:1}),_(n,{class:"title_label"},{default:d((()=>[m("在Deploy上创建一个 Ai 应用")])),_:1})])),_:1})])),_:1}),_(i,{class:"record_img",src:O,onClick:t[1]||(t[1]=e=>l.goRecordPage())}),_(n,{class:"flex column alignCenter content_div"},{default:d((()=>[_(n,{class:"flex row wrap justifyCenter alignCenter content_item_div"},{default:d((()=>[_(n,{class:"flex column alignCenter content_item_value"},{default:d((()=>[_(n,{class:"text1"},{default:d((()=>[m("照片和视频增强器可帮助您改")])),_:1}),_(n,{class:"text2"},{default:d((()=>[m("进、锐化和消除模糊媒体文件")])),_:1}),_(n,{class:"text2"},{default:d((()=>[m("即刻开始..")])),_:1}),_(n,{class:"flex row wrap justifyCenter alignCenter options_div"},{default:d((()=>[s.needImg?(u(),c(n,{key:0,class:"flex column justifyBetween alignCenter options_item"},{default:d((()=>[_(n,{class:"options_item_label"},{default:d((()=>[m("上传您的照片或视频即表示您同意收集和使用从以下位置提取的信息")])),_:1}),_(n,{class:"picture",style:f({backgroundImage:"url("+s.back[0]+")"}),onClick:l.preview},null,8,["style","onClick"]),_(n,{class:"options_item_btn",onClick:l.chose},{default:d((()=>[m("选择文件上传")])),_:1},8,["onClick"])])),_:1})):h("",!0),s.needTxt?(u(),c(n,{key:1,class:"flex column justifyBetween alignCenter options_item"},{default:d((()=>[_(n,{class:"options_item_label"},{default:d((()=>[m("上传您的照片或视频即表示您同意收集和使用从以下位置提取的信息")])),_:1}),_(T,{modelValue:s.tipTxt,"onUpdate:modelValue":t[2]||(t[2]=e=>s.tipTxt=e),class:"options_item_input",placeholder:"Woman, detailed face, sci-fi RGB glowing, cyberpunk"},null,8,["modelValue"])])),_:1})):h("",!0)])),_:1}),_(n,{class:"flex row justifyCenter alignCenter btn_div",onClick:t[3]||(t[3]=e=>l.goNextPage())},{default:d((()=>[_(i,{class:"btn_img",src:V}),_(n,{class:"btn_text"},{default:d((()=>[m("启动")])),_:1})])),_:1}),_(n,{class:"notice"},{default:d((()=>[m(" 预计消耗 "),g("span",{class:"notice_value"},"21"),m(" 算力 ")])),_:1})])),_:1})])),_:1})])),_:1}),_(A,{ref:"popup",type:"bottom","border-radius":"10px 10px 0 0"},{default:d((()=>[_(n,{class:"flex column alignCenter pop_div"},{default:d((()=>[_(n,{class:"pop_header_div"},{default:d((()=>[_(n,{class:"pop_header_text"},{default:d((()=>[m("充值算力")])),_:1})])),_:1}),_(n,{class:"pop_header_label"},{default:d((()=>[m(" 您当前剩余算力: "),g("span",{class:"pop_header_value"},"0")])),_:1}),_(n,{class:"flex row wrap justifyCenter pop_item_div"},{default:d((()=>[(u(!0),w(y,null,x(s.powerOptions,(e=>(u(),c(n,{onClick:t=>l.powerPick(e.PowerAmount),class:P([{pop_item_selected:e.PowerAmount==s.powerInput},"flex row justifyBetween alignCenter pop_item"])},{default:d((()=>[_(n,{class:"flex column justifyCenter alignCenter"},{default:d((()=>[_(n,{class:"pop_item_value"},{default:d((()=>[m(k(e.PowerAmount),1)])),_:2},1024),_(n,{class:"pop_item_label"},{default:d((()=>[m("算力")])),_:1})])),_:2},1024),_(n,{class:"pop_item_money"},{default:d((()=>[m("¥ "+k(e.AmountInCurrency),1)])),_:2},1024)])),_:2},1032,["onClick","class"])))),256))])),_:1}),_(T,{class:"custome_input",placeholder:"自定义算力数量",type:"number",modelValue:s.powerInput,"onUpdate:modelValue":t[4]||(t[4]=e=>s.powerInput=e),modelModifiers:{number:!0}},null,8,["modelValue"]),_(n,{class:"card_text"},{default:d((()=>[m("信用卡绑卡")])),_:1}),_(n,{class:"card_btn",onClick:t[5]||(t[5]=e=>l.goPay())},{default:d((()=>[m("绑定信用卡")])),_:1}),_(n,{class:"pay_btn",onClick:t[6]||(t[6]=e=>l.goPay())},{default:d((()=>[m("¥"+k(s.money)+" 立即支付",1)])),_:1}),_(n,{class:"flex row alignCenter agreement_div"},{default:d((()=>[_(i,{class:"btn_img",src:S}),_(n,{class:"agreement_text"},{default:d((()=>[m(" 充值即同意 "),g("span",{class:"agreement_value"},"《算力充值协议》")])),_:1})])),_:1})])),_:1})])),_:1},512),_(A,{ref:"popup2",type:"center"},{default:d((()=>[_(n,{class:"qrcode"},{default:d((()=>[_(q,{id:"qrcode","canvas-id":"qrcode",style:{width:"200px",height:"200px"}})])),_:1})])),_:1},512)])),_:1})}],["__scopeId","data-v-cd5bacfd"]]);export{N as default};
