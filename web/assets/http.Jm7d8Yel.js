import{g as t,L as e,h as a,M as s,j as o,l as n,k as p,s as r,m as i}from"./index-D9MTsPaB.js";const c={cappsList:"/capps",templatesList:"/capps/templates",gpusList:"/capps/gpus",createCapp:"/capps/create",startCapp:"/capps/start/",stopCapp:"/capps/stop/",delCapp:"/capps/",userInfo:"/users/me",durationType:"/powers/duration-types",durationPrice:"/powers/clculate-duration-price",clculatePrice:"/powers/clculate-price",transactionsList:"/transactions",flowsList:"/flow/flows/",promptStart:"/task/prompt/",imgResult:"/task/view/",imgHistory:"/task/history/",mplogin:"/wxapp/login/",qrcodeLogin:"/accounts/weixin/login_url/",googleLogin:"/accounts/google/login_url/",uploadUrl:"/task/upload/",depositPay:"/payment/create-payment/",wechatPay:"/payment/create-wechatpay/",wechatPayResult:"/payment/wechat-check/",getPower:"/payment/user-hashrate/",powersOptions:"/payment/hashrate-template/",pricePowers:"/payment/hashrate-convert/",commentsPop:"/flow/comments/"};function l(t){return g.httpRequest({url:c.googleLogin,method:"GET"},t)}function u(t){return g.httpRequest({url:c.qrcodeLogin,method:"GET"},t)}const g={baseUrl:"http://aidep.cn",httpRequest:(l,u)=>{let h=t("token"),m=t("language"),d={url:"http://aidep.cn"+l.url,data:u,method:l.method,header:"get"==l.method?{languageStr:m,authorization:"bearer "+h,"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}:{languageStr:m,authorization:"bearer "+h,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json; charset=UTF-8"},dataType:"json"};return new Promise((function(l,u){e(d).then((e=>{switch(e.data.status){case 401:if(s("token"),"mp-weixin"===t("uniPlatform"))n({success(t){if(t.code){p({title:"加载中",mask:!0});var e=t.code;uni.getUserInfo({lang:"zh_CN",success:t=>{let s={};var o;s.code=e,s.rawData=t.rawData,s.signature=t.signature,s.encryptedData=t.encryptedData,s.iv=t.iv,(o=s,g.httpRequest({url:c.mplogin,method:"POST"},o)).then((t=>{if(200!=t.status)return a({icon:"none",title:t.data.msg});r("token",t.data.token),a({icon:"success",title:"登录成功"}),i()}))},fail:t=>(i(),a({icon:"none",title:"亲爱的用户，您拒绝了！我就不给您跳转了。"}))})}},fail:t=>a({icon:"none",title:"亲爱的用户，您拒绝了！我就不给您跳转了。"})});else o({url:"/pages/toc/toc02Login"});case 200:break;default:a({icon:"none",title:e.data.message})}l(e.data)})).catch((t=>{u(t)}))}))}};export{c,l as g,u as q,g as r};
