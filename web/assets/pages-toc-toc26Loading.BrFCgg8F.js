import{h as t,j as e,u as o,c as s,w as i,f as a,o as n,a as c,b as l,t as d,B as r,z as u}from"./index-CseF7hPJ.js";import{a as g}from"./index.DD8BGfc4.js";import{T as m}from"./index.CQxaDcC-.js";import{_}from"./note2.w3RVvWxD.js";import{_ as f}from"./load.B3pZkcbV.js";import{_ as h}from"./http.DZ3dZdYj.js";const p=h({components:{TopDiv:m},data:()=>({isLogin:!1,href:"https://uniapp.dcloud.io/component/README?id=uniui",second:60,start:!0,timer:null,jilu_id:"",workflow_id:"",fee:""}),onLoad(t){t.jilu_id&&(this.jilu_id=t.jilu_id),t.id&&(this.workflow_id=t.id),t.fee&&(this.fee=Number(t.fee)),t.consuming&&(this.consuming=t.consuming,this.second=t.consuming)},onShow:function(){this.getResult()},methods:{getResult(){this.timer=setInterval((()=>{this.second>0&&(this.second--,console.log(this.second,"==="),g({jilu_id:this.jilu_id}).then((t=>{200==t.code&&(this.start=!1,this.goNextPage(t.data.id))})),(this.second<1||!this.start)&&(this.start=!1,t({icon:"none",title:"生成失败！"}),e({url:"/pages/toc/toc27Create?id="+this.workflow_id+"&consuming="+this.consuming+"&fee="+this.fee}),this.clearTimer()))}),1e3)},clearTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)},goHomePage(){e({url:"/pages/toc/toc27Create"})},goRecordPage(){e({url:"/pages/toc/toc24Record"})},goNextPage(t){e({url:"/pages/toc/toc25Product?id="+t})}},beforeUnmount(){this.clearTimer()}},[["render",function(t,e,g,m,h,p){const x=o("TopDiv"),j=u,b=a;return n(),s(b,{class:"flex column alignCenter bg_div"},{default:i((()=>[c(x),c(b,{class:"btn2Bottom flex",onClick:e[0]||(e[0]=t=>p.goRecordPage())},{default:i((()=>[c(j,{src:_}),c(b,{class:"goRecordPage"},{default:i((()=>[l(d(t.$t("tocIndex_text3")),1)])),_:1})])),_:1}),c(b,{class:"flex column alignCenter loding_div"},{default:i((()=>[c(j,{class:"load_image",src:f}),c(b,{class:"loding_text textAlign"},{default:i((()=>[l(d(t.$t("tocLoading_text1"))+" ",1),r("span",{class:"loding_value"},d(h.second),1),l(" "+d(t.$t("tocLoading_text2"))+" ….. ",1)])),_:1})])),_:1}),c(b,{class:"notice textAlign"},{default:i((()=>[l(d(t.$t("tocLoading_text3")),1)])),_:1}),c(b,{class:"notice2"},{default:i((()=>[l(d(t.$t("tocLoading_text4")),1)])),_:1}),c(b,{class:"bottom_btn",onClick:e[1]||(e[1]=t=>p.goNextPage())},{default:i((()=>[l(d(t.$t("tocLoading_text5")),1)])),_:1})])),_:1})}],["__scopeId","data-v-6c624319"]]);export{p as default};
